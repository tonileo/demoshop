import{a as D,b as K}from"./chunk-3JOVGMPH.js";import{a as y}from"./chunk-GEWYY2ZQ.js";import{b as k}from"./chunk-N65AT7QA.js";import{A as _,C as f,D as J,E as g,F as N,I as w,K as z,L as E,M as I,O as M,Q as b,S as R,T as H,W as T}from"./chunk-HISGLHQX.js";import{h as O,j as S,ja as F}from"./chunk-7XK2MI2N.js";import"./chunk-JGYM447R.js";import{Db as v,Eb as B,Gb as U,Hb as $,Ib as i,Jb as r,Kb as p,Rb as u,Tb as x,Wb as V,db as m,dc as a,eb as q,ec as h,fc as j,ka as l,lc as d,oa as c,wb as C,yb as s}from"./chunk-KSTUA5KL.js";var L=class o{fb=l(M);accountService=l(k);router=l(S);activatedRoute=l(O);returnUrl="/shop";constructor(){let e=this.activatedRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(e){switch(e){case"customer":this.loginForm.value.email="customer@test.com",this.loginForm.value.password="Pa$$w0rd";break;case"admin":this.loginForm.value.email="admin@test.com",this.loginForm.value.password="Pa$$w0rd";break;default:break}this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-login"]],standalone:!0,features:[d],decls:19,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","",1,"w-full","py-2","mb-4",3,"click"],["mat-flat-button","",1,"w-full","py-2",3,"click"]],template:function(t,n){t&1&&(i(0,"mat-card",0)(1,"form",1)(2,"div",2)(3,"h1",3),a(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),a(7,"Email address"),r(),p(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),a(11,"Password"),r(),p(12,"input",6),r(),i(13,"button",7),u("click",function(){return n.onSubmit("")}),a(14,"Sign in"),r(),i(15,"button",7),u("click",function(){return n.onSubmit("customer")}),a(16,"Login in as Customer"),r(),i(17,"button",8),u("click",function(){return n.onSubmit("admin")}),a(18,"Login in as Admin"),r()()()),t&2&&(m(),s("formGroup",n.loginForm))},dependencies:[b,w,_,g,N,E,I,y,T,D,R,F]})};function Y(o,e){if(o&1&&(i(0,"mat-error"),a(1),r()),o&2){let t=x();m(),j("",t.label," is required")}}function Z(o,e){o&1&&(i(0,"mat-error"),a(1,"Email is invalid"),r())}var P=class o{constructor(e){this.controlDir=e;this.controlDir.valueAccessor=this}label="";type="text";writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static \u0275fac=function(t){return new(t||o)(q(J,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[d],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(t,n){t&1&&(i(0,"mat-form-field",0)(1,"mat-label"),a(2),r(),p(3,"input",1),C(4,Y,2,1,"mat-error")(5,Z,2,0,"mat-error"),r()),t&2&&(m(2),h(n.label),m(),V("type",n.type),V("placeholder",n.label),s("formControl",n.control),m(),v(n.control.hasError("required")?4:-1),m(),v(n.control.hasError("email")?5:-1))},dependencies:[b,_,g,z,T,D,H,R]})};function ee(o,e){if(o&1&&(i(0,"li"),a(1),r()),o&2){let t=e.$implicit;m(),h(t)}}function te(o,e){if(o&1&&(i(0,"div",8)(1,"ul",10),U(2,ee,2,1,"li",null,B),r()()),o&2){let t=x();m(2),$(t.validationError)}}var A=class o{fb=l(M);aaccountService=l(k);router=l(S);snack=l(K);validationError;registerForm=this.fb.group({firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],password:["",[f.required]]});onSubmit(){this.aaccountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration succesfull - you can now login"),this.router.navigateByUrl("/account/login")},error:e=>this.validationError=e})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-register"]],standalone:!0,features:[d],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,n){t&1&&(i(0,"mat-card",0)(1,"form",1),u("ngSubmit",function(){return n.onSubmit()}),i(2,"div",2)(3,"h1",3),a(4,"Register"),r()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),C(9,te,4,0,"div",8),i(10,"button",9),a(11,"Register"),r()()()),t&2&&(m(),s("formGroup",n.registerForm),m(8),v(n.validationError?9:-1),m(),s("disabled",n.registerForm.invalid))},dependencies:[b,w,g,N,E,I,y,F,P]})};var Te=[{path:"login",component:L},{path:"register",component:A}];export{Te as accountRoutes};
